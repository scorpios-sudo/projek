<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Trader X â€¢ Professional Crypto Exchange</title>
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js"></script>
  <style>
    :root {
      --bg: #0a0f17;
      --panel: #111725;
      --panel-dark: #0d1321;
      --border: #1b2333;
      --border-light: #283142;
      --muted: #93a1b3;
      --text: #e7edf5;
      --text-light: #f8fafd;
      --accent: #00e0a4;
      --accent-hover: #00c389;
      --yellow: #f0b90b;
      --yellow-hover: #d19c0a;
      --buy: #00c389;
      --buy-light: rgba(0, 195, 137, 0.15);
      --sell: #ff5c7a;
      --sell-light: rgba(255, 92, 122, 0.15);
      --primary: #3b82f6;
      --primary-light: rgba(59, 130, 246, 0.15);
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      --transition: all 0.2s ease;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
      font-size: 14px;
      line-height: 1.5;
      overflow-x: hidden;
    }
    
    /* Header */
    header {
      padding: 14px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      border-bottom: 1px solid var(--border);
      background: var(--panel);
      backdrop-filter: blur(10px);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    header .brand {
      font-weight: 900;
      color: var(--yellow);
      font-size: 22px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .brand-icon {
      background: var(--yellow);
      color: var(--bg);
      width: 28px;
      height: 28px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
    }
    
    .pair-selector {
      display: flex;
      align-items: center;
      gap: 8px;
      background: var(--panel-dark);
      padding: 6px 12px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
    }
    
    .pair-selector .current-pair {
      font-weight: 700;
      color: var(--text-light);
      font-size: 16px;
    }
    
    .pair-selector .pair-change {
      color: var(--muted);
      font-size: 12px;
      background: var(--border);
      padding: 2px 8px;
      border-radius: 4px;
    }
    
    .tabs {
      margin-left: auto;
      display: flex;
      gap: 8px;
    }
    
    .tab {
      padding: 8px 14px;
      border: 1px solid var(--border);
      background: var(--panel-dark);
      color: var(--muted);
      border-radius: var(--radius-md);
      cursor: pointer;
      font-weight: 600;
      font-size: 13px;
      transition: var(--transition);
    }
    
    .tab:hover {
      background: var(--border-light);
      border-color: var(--border-light);
    }
    
    .tab.active {
      background: var(--yellow);
      color: #0b0f17;
      border-color: var(--yellow);
      font-weight: 700;
    }
    
    .user-menu {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .balance-pill {
      background: var(--panel-dark);
      padding: 6px 12px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      font-size: 13px;
      font-weight: 600;
    }
    
    .balance-pill span {
      color: var(--yellow);
    }
    
    .user-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      cursor: pointer;
    }
    
    /* Main Layout */
    main.layout {
      display: grid;
      grid-template-columns: 2fr 1fr;
      grid-template-rows: auto auto auto;
      gap: 16px;
      padding: 20px;
      max-width: 1600px;
      margin: 0 auto;
    }
    
    .panel {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow);
      transition: var(--transition);
    }
    
    .panel:hover {
      border-color: var(--border-light);
    }
    
    .panel-header {
      padding: 16px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border);
    }
    
    .panel-header h2 {
      margin: 0;
      font-size: 15px;
      font-weight: 700;
      color: var(--text-light);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .panel-header .icon {
      color: var(--muted);
    }
    
    .panel-controls {
      display: flex;
      gap: 8px;
    }
    
    .panel-controls button {
      background: var(--panel-dark);
      border: 1px solid var(--border);
      color: var(--muted);
      width: 32px;
      height: 32px;
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .panel-controls button:hover {
      background: var(--border-light);
      color: var(--text);
    }
    
    .panel-content {
      padding: 20px;
    }
    
    /* Chart Containers */
    #tvChart {
      height: 500px;
      border-radius: var(--radius-md);
      overflow: hidden;
    }
    
    .chart-container {
      position: relative;
      height: 340px;
    }
    
    /* Order Entry */
    .order-type-selector {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
    }
    
    .order-type-btn {
      flex: 1;
      padding: 10px;
      background: var(--panel-dark);
      border: 1px solid var(--border);
      color: var(--muted);
      border-radius: var(--radius-md);
      cursor: pointer;
      font-weight: 600;
      text-align: center;
      transition: var(--transition);
    }
    
    .order-type-btn.active {
      background: var(--primary-light);
      border-color: var(--primary);
      color: var(--primary);
    }
    
    .order-side-selector {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 20px;
    }
    
    .order-side-btn {
      padding: 14px;
      border-radius: var(--radius-md);
      border: none;
      font-weight: 700;
      font-size: 15px;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .order-side-btn.buy {
      background: var(--buy-light);
      color: var(--buy);
      border: 2px solid var(--buy);
    }
    
    .order-side-btn.sell {
      background: var(--sell-light);
      color: var(--sell);
      border: 2px solid var(--sell);
    }
    
    .order-side-btn.active.buy {
      background: var(--buy);
      color: #06140f;
    }
    
    .order-side-btn.active.sell {
      background: var(--sell);
      color: #2b0a11;
    }
    
    .form-group {
      margin-bottom: 16px;
    }
    
    .form-group label {
      display: block;
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 8px;
      font-weight: 500;
    }
    
    .form-control {
      width: 100%;
      padding: 12px 14px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      background: var(--panel-dark);
      color: var(--text);
      font-size: 14px;
      transition: var(--transition);
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    
    .amount-percentage {
      display: flex;
      gap: 8px;
      margin-top: 12px;
    }
    
    .percentage-btn {
      flex: 1;
      padding: 8px;
      background: var(--panel-dark);
      border: 1px solid var(--border);
      color: var(--muted);
      border-radius: var(--radius-sm);
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
      text-align: center;
      transition: var(--transition);
    }
    
    .percentage-btn:hover {
      background: var(--border-light);
      color: var(--text);
    }
    
    .order-summary {
      background: var(--panel-dark);
      padding: 16px;
      border-radius: var(--radius-md);
      margin: 20px 0;
      border: 1px solid var(--border);
    }
    
    .summary-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 13px;
    }
    
    .summary-row.total {
      font-weight: 700;
      font-size: 15px;
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid var(--border);
    }
    
    .action-buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 20px;
    }
    
    .btn {
      padding: 14px;
      border-radius: var(--radius-md);
      border: none;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 14px;
    }
    
    .btn-primary {
      background: var(--primary);
      color: white;
    }
    
    .btn-primary:hover {
      background: #2563eb;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }
    
    .btn-buy {
      background: var(--buy);
      color: #06140f;
    }
    
    .btn-buy:hover {
      background: #00a87a;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 195, 137, 0.3);
    }
    
    .btn-sell {
      background: var(--sell);
      color: #2b0a11;
    }
    
    .btn-sell:hover {
      background: #ff4468;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(255, 92, 122, 0.3);
    }
    
    .btn-secondary {
      background: var(--panel-dark);
      color: var(--text);
      border: 1px solid var(--border);
    }
    
    .btn-secondary:hover {
      background: var(--border-light);
      border-color: var(--border-light);
    }
    
    .btn-outline {
      background: transparent;
      color: var(--muted);
      border: 1px solid var(--border);
    }
    
    .btn-outline:hover {
      background: var(--panel-dark);
      color: var(--text);
      border-color: var(--border-light);
    }
    
    .balance-display {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      background: var(--panel-dark);
      padding: 16px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
    }
    
    .balance-item h4 {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 6px;
      font-weight: 500;
    }
    
    .balance-item .value {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-light);
    }
    
    .balance-item .value span {
      color: var(--muted);
      font-size: 14px;
      margin-left: 4px;
    }
    
    /* Tables */
    .table-container {
      overflow-x: auto;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }
    
    thead {
      background: var(--panel-dark);
    }
    
    th {
      padding: 12px 16px;
      text-align: left;
      font-weight: 600;
      color: var(--muted);
      border-bottom: 1px solid var(--border);
      white-space: nowrap;
    }
    
    td {
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
    }
    
    tbody tr:hover {
      background: rgba(255, 255, 255, 0.03);
    }
    
    .buy-text {
      color: var(--buy);
      font-weight: 600;
    }
    
    .sell-text {
      color: var(--sell);
      font-weight: 600;
    }
    
    .price-up {
      color: var(--buy);
    }
    
    .price-down {
      color: var(--sell);
    }
    
    /* Order Book */
    .order-book {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    .order-book-side {
      display: flex;
      flex-direction: column;
    }
    
    .order-book-header {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      font-size: 12px;
      color: var(--muted);
      border-bottom: 1px solid var(--border);
    }
    
    .order-book-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      font-size: 13px;
      border-bottom: 1px solid rgba(27, 35, 51, 0.5);
      cursor: pointer;
      transition: var(--transition);
    }
    
    .order-book-row:hover {
      background: rgba(255, 255, 255, 0.02);
    }
    
    .order-book-bids .order-book-row {
      background: linear-gradient(90deg, rgba(0, 195, 137, 0.1) var(--fill-width), transparent var(--fill-width));
    }
    
    .order-book-asks .order-book-row {
      background: linear-gradient(90deg, rgba(255, 92, 122, 0.1) var(--fill-width), transparent var(--fill-width));
    }
    
    /* Depth Chart */
    #depthChart {
      width: 100%;
      height: 240px;
    }
    
    /* Market Stats */
    .market-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin-bottom: 20px;
    }
    
    .stat-card {
      background: var(--panel-dark);
      padding: 16px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
    }
    
    .stat-label {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 8px;
    }
    
    .stat-value {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-light);
    }
    
    .stat-change {
      font-size: 12px;
      font-weight: 600;
      margin-top: 4px;
    }
    
    .stat-change.positive {
      color: var(--buy);
    }
    
    .stat-change.negative {
      color: var(--sell);
    }
    
    /* Responsive */
    @media (max-width: 1200px) {
      main.layout {
        grid-template-columns: 1fr;
      }
      
      .market-stats {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    @media (max-width: 768px) {
      header {
        flex-wrap: wrap;
      }
      
      .tabs {
        order: 3;
        width: 100%;
        margin-top: 10px;
        margin-left: 0;
      }
      
      .user-menu {
        margin-left: auto;
      }
      
      .market-stats {
        grid-template-columns: 1fr;
      }
      
      .order-book {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="brand">
      <div class="brand-icon">TX</div>
      Trader X
    </div>
    
    <div class="pair-selector">
      <div class="current-pair" id="currentPair">BTC/IDR</div>
      <div class="pair-change" id="priceChange">+2.4%</div>
    </div>
    
    <div class="tabs">
      <div class="tab active" data-pair="BTC/IDR">BTC/IDR</div>
      <div class="tab" data-pair="ETH/IDR">ETH/IDR</div>
      <div class="tab" data-pair="DOGE/IDR">DOGE/IDR</div>
      <div class="tab" data-pair="BNB/IDR">BNB/IDR</div>
      <div class="tab" data-pair="XRP/IDR">XRP/IDR</div>
    </div>
    
    <div class="user-menu">
      <div class="balance-pill">IDR: <span id="totalBalance">125,430,500</span></div>
      <div class="user-avatar">JD</div>
    </div>
  </header>

  <!-- Main Layout -->
  <main class="layout">
    <!-- Chart Panel -->
    <section class="panel" style="grid-row: span 2;">
      <div class="panel-header">
        <h2><span class="icon">ðŸ“ˆ</span> Trading Chart</h2>
        <div class="panel-controls">
          <button title="Fullscreen">â†—</button>
          <button title="Settings">âš™</button>
          <button title="Indicators">ðŸ“Š</button>
        </div>
      </div>
      <div class="panel-content">
        <div id="tvChart"></div>
      </div>
    </section>

    <!-- Order Book -->
    <section class="panel">
      <div class="panel-header">
        <h2><span class="icon">ðŸ“Š</span> Order Book</h2>
        <div class="panel-controls">
          <button title="Refresh">â†»</button>
          <button title="Settings">âš™</button>
        </div>
      </div>
      <div class="panel-content">
        <div class="order-book">
          <div class="order-book-side order-book-bids">
            <div class="order-book-header">
              <span>Harga (IDR)</span>
              <span>Jumlah (BTC)</span>
              <span>Total</span>
            </div>
            <div id="bidsList"></div>
          </div>
          <div class="order-book-side order-book-asks">
            <div class="order-book-header">
              <span>Harga (IDR)</span>
              <span>Jumlah (BTC)</span>
              <span>Total</span>
            </div>
            <div id="asksList"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Order Entry -->
    <section class="panel">
      <div class="panel-header">
        <h2><span class="icon">ðŸ’¹</span> Place Order</h2>
        <div class="panel-controls">
          <button title="Calculator">ðŸ§®</button>
        </div>
      </div>
      <div class="panel-content">
        <!-- Order Type -->
        <div class="order-type-selector">
          <button class="order-type-btn active" data-type="market">Market</button>
          <button class="order-type-btn" data-type="limit">Limit</button>
          <button class="order-type-btn" data-type="stop">Stop</button>
        </div>
        
        <!-- Order Side -->
        <div class="order-side-selector">
          <button class="order-side-btn buy active" data-side="buy">BUY</button>
          <button class="order-side-btn sell" data-side="sell">SELL</button>
        </div>
        
        <!-- Form -->
        <div class="form-group">
          <label for="price">Harga (IDR)</label>
          <input type="number" id="price" class="form-control" placeholder="Masukkan harga" value="952000000">
        </div>
        
        <div class="form-group">
          <label for="amount">Jumlah (BTC)</label>
          <input type="number" id="amount" class="form-control" placeholder="Masukkan jumlah" value="0.01">
          <div class="amount-percentage">
            <button class="percentage-btn" data-percent="25">25%</button>
            <button class="percentage-btn" data-percent="50">50%</button>
            <button class="percentage-btn" data-percent="75">75%</button>
            <button class="percentage-btn" data-percent="100">100%</button>
          </div>
        </div>
        
        <div class="form-group">
          <label for="total">Total (IDR)</label>
          <input type="number" id="total" class="form-control" placeholder="Total nilai" value="9520000" readonly>
        </div>
        
        <!-- Order Summary -->
        <div class="order-summary">
          <div class="summary-row">
            <span>Biaya Trading</span>
            <span>0.1%</span>
          </div>
          <div class="summary-row">
            <span>Estimasi Biaya</span>
            <span>9,520 IDR</span>
          </div>
          <div class="summary-row total">
            <span>Total yang Dibayar</span>
            <span>9,529,520 IDR</span>
          </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="action-buttons">
          <button class="btn btn-buy" id="placeBuy">
            <span>ðŸ›’</span> BUY BTC
          </button>
          <button class="btn btn-sell" id="placeSell">
            <span>ðŸ’°</span> SELL BTC
          </button>
        </div>
        
        <!-- Balance Display -->
        <div class="balance-display">
          <div class="balance-item">
            <h4>Saldo IDR</h4>
            <div class="value">125,430,500 <span>IDR</span></div>
          </div>
          <div class="balance-item">
            <h4>Saldo BTC</h4>
            <div class="value">0.85 <span>BTC</span></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Market Stats -->
    <section class="panel">
      <div class="panel-header">
        <h2><span class="icon">ðŸ“Š</span> Market Stats</h2>
      </div>
      <div class="panel-content">
        <div class="market-stats">
          <div class="stat-card">
            <div class="stat-label">Harga Terakhir</div>
            <div class="stat-value">952,000,000</div>
            <div class="stat-change positive">+2.4% (24h)</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Volume (24h)</div>
            <div class="stat-value">1,245 BTC</div>
            <div class="stat-change positive">+15.3%</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">High/Low (24h)</div>
            <div class="stat-value">965M / 925M</div>
            <div class="stat-change positive">+4.3%</div>
          </div>
        </div>
        
        <!-- Depth Chart -->
        <div class="form-group">
          <label>Depth Chart</label>
          <div class="chart-container">
            <canvas id="depthChart"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Recent Trades -->
    <section class="panel">
      <div class="panel-header">
        <h2><span class="icon">ðŸ”„</span> Recent Trades</h2>
        <div class="panel-controls">
          <button title="Auto-refresh">âŸ³</button>
        </div>
      </div>
      <div class="panel-content">
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Waktu</th>
                <th>Harga (IDR)</th>
                <th>Jumlah</th>
                <th>Nilai (IDR)</th>
                <th>Tipe</th>
              </tr>
            </thead>
            <tbody id="tradesBody">
              <!-- Trades will be populated by JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Open Orders -->
    <section class="panel">
      <div class="panel-header">
        <h2><span class="icon">ðŸ“‹</span> Open Orders</h2>
        <div class="panel-controls">
          <button title="Cancel All" id="cancelAllOrders">âœ• All</button>
        </div>
      </div>
      <div class="panel-content">
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Pasangan</th>
                <th>Tipe</th>
                <th>Harga</th>
                <th>Jumlah</th>
                <th>Total</th>
                <th>Aksi</th>
              </tr>
            </thead>
            <tbody id="ordersBody">
              <!-- Orders will be populated by JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <script>
    // Initialize TradingView Chart
    new TradingView.widget({
      "container_id": "tvChart",
      "width": "100%",
      "height": 500,
      "symbol": "BITSTAMP:BTCUSD",
      "interval": "60",
      "timezone": "Asia/Jakarta",
      "theme": "dark",
      "style": "1",
      "locale": "id",
      "toolbar_bg": "#0a0f17",
      "enable_publishing": false,
      "hide_side_toolbar": false,
      "allow_symbol_change": true,
      "studies": [
        "MACD@tv-basicstudies",
        "RSI@tv-basicstudies"
      ],
      "show_popup_button": true,
      "popup_width": "1000",
      "popup_height": "650",
      "custom_css_url": "https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.css"
    });

    // Initialize Depth Chart
    const depthCtx = document.getElementById('depthChart').getContext('2d');
    const depthChart = new Chart(depthCtx, {
      type: 'line',
      data: {
        labels: Array.from({length: 20}, (_, i) => (900 + i * 5) + 'M'),
        datasets: [
          {
            label: 'Bids',
            data: Array.from({length: 20}, (_, i) => Math.random() * 100 + 50),
            borderColor: '#00c389',
            backgroundColor: 'rgba(0, 195, 137, 0.1)',
            fill: true,
            tension: 0.4
          },
          {
            label: 'Asks',
            data: Array.from({length: 20}, (_, i) => Math.random() * 100 + 50),
            borderColor: '#ff5c7a',
            backgroundColor: 'rgba(255, 92, 122, 0.1)',
            fill: true,
            tension: 0.4
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            labels: {
              color: '#93a1b3'
            }
          }
        },
        scales: {
          x: {
            grid: {
              color: 'rgba(27, 35, 51, 0.5)'
            },
            ticks: {
              color: '#93a1b3'
            }
          },
          y: {
            grid: {
              color: 'rgba(27, 35, 51, 0.5)'
            },
            ticks: {
              color: '#93a1b3'
            }
          }
        }
      }
    });

    // Sample data for order book
    const generateOrderBook = () => {
      const bids = [];
      const asks = [];
      let bidPrice = 951500000;
      let askPrice = 952500000;
      
      for (let i = 0; i < 10; i++) {
        const bidAmount = (Math.random() * 0.5 + 0.1).toFixed(4);
        const askAmount = (Math.random() * 0.5 + 0.1).toFixed(4);
        
        bids.push({
          price: (bidPrice - i * 500000).toLocaleString('id-ID'),
          amount: bidAmount,
          total: ((bidPrice - i * 500000) * bidAmount).toLocaleString('id-ID')
        });
        
        asks.push({
          price: (askPrice + i * 500000).toLocaleString('id-ID'),
          amount: askAmount,
          total: ((askPrice + i * 500000) * askAmount).toLocaleString('id-ID')
        });
      }
      
      return { bids, asks };
    };

    // Populate order book
    const populateOrderBook = () => {
      const { bids, asks } = generateOrderBook();
      const bidsList = document.getElementById('bidsList');
      const asksList = document.getElementById('asksList');
      
      bidsList.innerHTML = '';
      asksList.innerHTML = '';
      
      bids.forEach(order => {
        const row = document.createElement('div');
        row.className = 'order-book-row';
        row.style.setProperty('--fill-width', `${Math.random() * 80 + 20}%`);
        row.innerHTML = `
          <span class="buy-text">${order.price}</span>
          <span>${order.amount}</span>
          <span>${order.total}</span>
        `;
        bidsList.appendChild(row);
      });
      
      asks.forEach(order => {
        const row = document.createElement('div');
        row.className = 'order-book-row';
        row.style.setProperty('--fill-width', `${Math.random() * 80 + 20}%`);
        row.innerHTML = `
          <span class="sell-text">${order.price}</span>
          <span>${order.amount}</span>
          <span>${order.total}</span>
        `;
        asksList.appendChild(row);
      });
    };

    // Sample trades data
    const generateTrades = () => {
      const trades = [];
      const now = Date.now();
      const sides = ['buy', 'sell'];
      
      for (let i = 0; i < 15; i++) {
        const time = new Date(now - i * 60000).toLocaleTimeString('id-ID', {
          hour: '2-digit',
          minute: '2-digit',
          second: '2-digit'
        });
        const price = 952000000 + (Math.random() - 0.5) * 2000000;
        const amount = (Math.random() * 0.5 + 0.01).toFixed(4);
        const side = sides[Math.floor(Math.random() * 2)];
        
        trades.push({
          time,
          price: price.toLocaleString('id-ID'),
          amount,
          total: (price * amount).toLocaleString('id-ID'),
          side
        });
      }
      
      return trades;
    };

    // Populate trades table
    const populateTrades = () => {
      const trades = generateTrades();
      const tradesBody = document.getElementById('tradesBody');
      
      tradesBody.innerHTML = '';
      
      trades.forEach(trade => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${trade.time}</td>
          <td>${trade.price}</td>
          <td>${trade.amount}</td>
          <td>${trade.total}</td>
          <td><span class="${trade.side === 'buy' ? 'buy-text' : 'sell-text'}">${trade.side.toUpperCase()}</span></td>
        `;
        tradesBody.appendChild(row);
      });
    };

    // Sample open orders
    const generateOrders = () => {
      return [
        { pair: 'BTC/IDR', type: 'Limit Buy', price: '950,000,000', amount: '0.05', total: '47,500,000' },
        { pair: 'BTC/IDR', type: 'Limit Sell', price: '960,000,000', amount: '0.02', total: '19,200,000' },
        { pair: 'ETH/IDR', type: 'Market Buy', price: 'Market', amount: '1.5', total: '45,000,000' }
      ];
    };

    // Populate open orders
    const populateOrders = () => {
      const orders = generateOrders();
      const ordersBody = document.getElementById('ordersBody');
      
      ordersBody.innerHTML = '';
      
      orders.forEach(order => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${order.pair}</td>
          <td>${order.type}</td>
          <td>${order.price}</td>
          <td>${order.amount}</td>
          <td>${order.total}</td>
          <td><button class="btn-outline" style="padding: 4px 8px; font-size: 12px;">Cancel</button></td>
        `;
        ordersBody.appendChild(row);
      });
    };

    // Event Listeners
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize data
      populateOrderBook();
      populateTrades();
      populateOrders();
      
      // Tab switching
      document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', () => {
          document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          document.getElementById('currentPair').textContent = tab.dataset.pair;
          
          // Update price change randomly
          const change = (Math.random() - 0.3) * 10;
          const changeElement = document.getElementById('priceChange');
          changeElement.textContent = `${change >= 0 ? '+' : ''}${change.toFixed(2)}%`;
          changeElement.style.color = change >= 0 ? '#00c389' : '#ff5c7a';
        });
      });
      
      // Order type buttons
      document.querySelectorAll('.order-type-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.order-type-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          
          const type = btn.dataset.type;
          const priceInput = document.getElementById('price');
          
          if (type === 'market') {
            priceInput.value = 'Market';
            priceInput.disabled = true;
          } else {
            priceInput.disabled = false;
            priceInput.value = '952000000';
          }
        });
      });
      
      // Order side buttons
      document.querySelectorAll('.order-side-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.order-side-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
        });
      });
      
      // Percentage buttons
      document.querySelectorAll('.percentage-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const percent = btn.dataset.percent;
          const balance = 0.85; // BTC balance
          const amountInput = document.getElementById('amount');
          amountInput.value = (balance * (percent / 100)).toFixed(4);
          calculateTotal();
        });
      });
      
      // Calculate total when amount or price changes
      document.getElementById('amount').addEventListener('input', calculateTotal);
      document.getElementById('price').addEventListener('input', calculateTotal);
      
      // Place order buttons
      document.getElementById('placeBuy').addEventListener('click', () => {
        const amount = document.getElementById('amount').value;
        const price = document.getElementById('price').value;
        const side = document.querySelector('.order-side-btn.active').dataset.side;
        
        if (amount && price) {
          alert(`Placing ${side.toUpperCase()} order:\nAmount: ${amount} BTC\nPrice: ${price} IDR`);
          // In real app, send to backend API
        }
      });
      
      document.getElementById('placeSell').addEventListener('click', () => {
        const amount = document.getElementById('amount').value;
        const price = document.getElementById('price').value;
        const side = document.querySelector('.order-side-btn.active').dataset.side;
        
        if (amount && price) {
          alert(`Placing ${side.toUpperCase()} order:\nAmount: ${amount} BTC\nPrice: ${price} IDR`);
          // In real app, send to backend API
        }
      });
      
      // Cancel all orders
      document.getElementById('cancelAllOrders').addEventListener('click', () => {
        if (confirm('Cancel all open orders?')) {
          alert('All orders cancelled');
          document.getElementById('ordersBody').innerHTML = '<tr><td colspan="6" style="text-align: center; color: var(--muted); padding: 20px;">No open orders</td></tr>';
        }
      });
      
      // Auto-refresh data every 5 seconds
      setInterval(() => {
        populateOrderBook();
        populateTrades();
      }, 5000);
    });
    
    // Calculate total order value
    function calculateTotal() {
      const amount = parseFloat(document.getElementById('amount').value) || 0;
      const price = parseFloat(document.getElementById('price').value) || 0;
      const totalInput = document.getElementById('total');
      
      if (amount && price) {
        const total = amount * price;
        totalInput.value = total.toLocaleString('id-ID', {
          maximumFractionDigits: 0
        });
        
        // Update order summary
        const fee = total * 0.001;
        const totalWithFee = total + fee;
        
        document.querySelector('.order-summary .summary-row:nth-child(2) span:last-child').textContent = 
          fee.toLocaleString('id-ID', {maximumFractionDigits: 0}) + ' IDR';
        document.querySelector('.order-summary .summary-row.total span:last-child').textContent = 
          totalWithFee.toLocaleString('id-ID', {maximumFractionDigits: 0}) + ' IDR';
      }
    }
    
    // Initialize calculation
    calculateTotal();
  </script>
</body>
</html>